# Instructions for Using `sarmalink_fetcher.py` and `plot_rom_data.py`

## Overview
These two Python scripts allow you to:
1. **Fetch and store sensor data** from a remote URL into separate `ROM_*.txt` files (`sarmalink_fetcher.py`).
2. **Generate plots** of temperature readings (`RAW`) over time for each `ROM` ID (`plot_rom_data.py`).

---

## Prerequisites

Before using the scripts, ensure you have the following:
1. **Python 3.7+** installed.
2. The required Python libraries:
   ```bash
   pip install requests pandas matplotlib
   ```

---

## Using `sarmalink_fetcher.py`

### Purpose
The `sarmalink_fetcher.py` script fetches data from a remote URL every minute, processes it, and stores it in separate `ROM_*.txt` files based on the ROM ID.

### Setup
1. **Edit the URL**:
   Open `sarmalink_fetcher.py` and replace:
   ```python
   url = "http://your.thermom.ip.addr/sarmalink_pull.txt"
   ```
   with the actual URL of your data source.

2. **Run the Script**:
   Execute the script:
   ```bash
   python sarmalink_fetcher.py
   ```
   The script will:
   - Fetch data from the URL every minute.
   - Process `DAT`, `SAMPLE`, `ROM`, and `RAW` fields.
   - Save the data into files named `ROM_<ROM_ID>.txt` in the current directory.

3. **Stop the Script**:
   Press `Ctrl+C` to stop the script when needed.

---

## Using `plot_rom_data.py`

### Purpose
The `plot_rom_data.py` script reads the `ROM_*.txt` files generated by `sarmalink_fetcher.py`, creates line plots of temperature (`RAW`) readings over time (`DAT`), and saves the plots as `ROM_<ROM_ID>.png`.

### Steps
1. **Place Files in the Same Directory**:
   Ensure `plot_rom_data.py` is in the same directory as the `ROM_*.txt` files.

2. **Run the Script**:
   Execute the script:
   ```bash
   python plot_rom_data.py
   ```
   The script will:
   - Read each `ROM_*.txt` file.
   - Parse the `DAT` and `RAW` columns.
   - Generate a plot for each ROM ID.
   - Save the plots as `ROM_<ROM_ID>.png` in the same directory.

3. **View the Plots**:
   Open the generated `.png` files to view the temperature trends for each ROM device.

---

## Example Workflow

### 1. Start Fetching Data
Run `sarmalink_fetcher.py`:
```bash
python sarmalink_fetcher.py
```

The script will create files like:
- `ROM_28FFD52A031705F6.txt`
- `ROM_28FFC230031705F8.txt`

Each file contains lines like:
```
2025-01-02 22:14:55, 24296, 24.1875
2025-01-02 22:15:55, 24297, 24.2875
```

### 2. Generate Plots
Run `plot_rom_data.py`:
```bash
python plot_rom_data.py
```

The script will generate plots like:
- `ROM_28FFD52A031705F6.png`
- `ROM_28FFC230031705F8.png`

---

## Notes

- Ensure both scripts have appropriate permissions to read/write files in the directory.
- Check the URL in `sarmalink_fetcher.py` for accuracy before running.

---

## Troubleshooting

1. **Missing Python Libraries**:
   If you encounter import errors, ensure the required libraries are installed:
   ```bash
   pip install requests pandas matplotlib
   ```

2. **No Data Files Created**:
   - Verify the URL in `sarmalink_fetcher.py`.
   - Check the connectivity to the URL.

3. **Plots Not Generated**:
   - Ensure `ROM_*.txt` files are in the same directory as `plot_rom_data.py`.
   - Check the contents of the `ROM_*.txt` files for valid `DAT` and `RAW` values.

---

